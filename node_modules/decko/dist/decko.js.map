{"version":3,"sources":["../src/decko.js"],"names":[],"mappings":"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","file":"decko.js","sourcesContent":["\nconst EMPTY = {};\nconst HOP = Object.prototype.hasOwnProperty;\n\nlet fns = {\n\t/**  let cachedFn = memoize(originalFn); */\n\tmemoize(fn, opt=EMPTY) {\n\t\tlet cache = opt.cache || {};\n\t\treturn function(...a) {\n\t\t\tlet k = String(a[0]);\n\t\t\tif (opt.caseSensitive===false) k = k.toLowerCase();\n\t\t\treturn HOP.call(cache,k) ? cache[k] : (cache[k] = fn.apply(this, a));\n\t\t};\n\t},\n\n\t/** let throttled = debounce(10, console.log); */\n\tdebounce(fn, opts) {\n\t\tif (typeof opts==='function') { let p = fn; fn = opts; opts = p; }\n\t\tlet delay = opts && opts.delay || opts || 0,\n\t\t\targs, context, timer;\n\t\treturn function(...a) {\n\t\t\targs = a;\n\t\t\tcontext = this;\n\t\t\tif (!timer) timer = setTimeout( () => {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\targs = context = timer = null;\n\t\t\t}, delay);\n\t\t};\n\t},\n\n\tbind(target, key, { value: fn }) {\n\t\treturn {\n\t\t\tconfigurable: true,\n\t\t\tget() {\n\t\t\t\tlet value = fn.bind(this);\n\t\t\t\tObject.defineProperty(this, key, {\n\t\t\t\t\tvalue,\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\twritable: true\n\t\t\t\t});\n\t\t\t\treturn value;\n\t\t\t}\n\t\t};\n\t}\n};\n\n\nlet memoize = multiMethod(fns.memoize),\n\tdebounce = multiMethod(fns.debounce),\n\tbind = multiMethod((f,c)=>f.bind(c), ()=>fns.bind);\n\nexport { memoize, debounce, bind };\nexport default { memoize, debounce, bind };\n\n\n/** Creates a function that supports the following calling styles:\n *\td() - returns an unconfigured decorator\n *\td(opts) - returns a configured decorator\n *\td(fn, opts) - returns a decorated proxy to `fn`\n *\td(target, key, desc) - the decorator itself\n *\n *\t@Example:\n *\t\t// simple identity deco:\n *\t\tlet d = multiMethod( fn => fn );\n *\n *\t\tclass Foo {\n *\t\t\t@d\n *\t\t\tbar() { }\n *\n *\t\t\t@d()\n *\t\t\tbaz() { }\n *\n *\t\t\t@d({ opts })\n *\t\t\tbat() { }\n *\n *\t\t\tbap = d(() => {})\n *\t\t}\n */\nfunction multiMethod(inner, deco) {\n\tdeco = deco || inner.decorate || decorator(inner);\n\tlet d = deco();\n\treturn (...args) => {\n\t\tlet l = args.length;\n\t\treturn (l<2 ? deco : (l>2 ? d : inner))(...args);\n\t};\n}\n\n/** Returns function supports the forms:\n *\tdeco(target, key, desc) -> decorate a method\n *\tdeco(Fn) -> call the decorator proxy on a function\n */\nfunction decorator(fn) {\n\treturn opt => (\n\t\ttypeof opt==='function' ? fn(opt) : (target, key, desc) => {\n\t\t\tdesc.value = fn(desc.value, opt, target, key, desc);\n\t\t}\n\t);\n}\n"]}